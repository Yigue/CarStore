{
  "info": {
    "_postman_id": "carstore-api-collection",
    "name": "CarStore API - Colecci칩n Completa",
    "description": "Colecci칩n completa para testear todos los endpoints de la API CarStore.\n\n## Configuraci칩n Inicial\n1. Ejecutar primero Login para obtener el token\n2. El token se guarda autom치ticamente en la variable `authToken`\n3. Todos los dem치s endpoints usan ese token\n\n## Usuario Admin Seedeado\n- Email: admin@carstore.com\n- Password: Admin123!\n\n## Enums Reference\n### Color (0-8)\n0=White, 1=Black, 2=Gray, 3=Silver, 4=Red, 5=Blue, 6=Green, 7=Yellow, 8=Brown\n\n### TypeCar (0-5)\n0=Sedan, 1=Coupe, 2=Hatchback, 3=SUV, 4=Pickup, 5=Minivan\n\n### StatusCar (0-2)\n0=New, 1=Used, 2=Certified\n\n### statusServiceCar (0-4)\n0=Service, 1=EnVenta, 2=Vendido, 3=Disponible, 4=NoDisponible\n\n### SaleStatus (0-2)\n0=Pending, 1=Completed, 2=Cancelled\n\n### ClientStatus (0-1)\n0=Active, 1=Inactive\n\n### QuoteStatus (0-3)\n0=Pending, 1=Accepted, 2=Rejected, 3=Expired\n\n### PaymentMethod (0-3)\n0=Cash, 1=Credit, 2=Debit, 3=Transfer\n\n### TransactionType (0-1)\n0=Income, 1=Expense",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "createdUserId",
      "value": "",
      "type": "string"
    },
    {
      "key": "createdClientId",
      "value": "",
      "type": "string"
    },
    {
      "key": "createdCarId",
      "value": "",
      "type": "string"
    },
    {
      "key": "createdSaleId",
      "value": "",
      "type": "string"
    },
    {
      "key": "createdQuoteId",
      "value": "",
      "type": "string"
    },
    {
      "key": "createdFinancialId",
      "value": "",
      "type": "string"
    },
    {
      "key": "marcaId",
      "value": "",
      "type": "string"
    },
    {
      "key": "modeloId",
      "value": "",
      "type": "string"
    },
    {
      "key": "categoryId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "游댏 1. Users (Autenticaci칩n)",
      "item": [
        {
          "name": "1.1 Login - Admin Seedeado",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', jsonData.token);",
                  "    pm.test('Token guardado correctamente', function() {",
                  "        pm.expect(jsonData.token).to.not.be.empty;",
                  "    });",
                  "}",
                  "",
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"admin@carstore.com\",\n    \"password\": \"Admin123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/login",
              "host": ["{{baseUrl}}"],
              "path": ["users", "login"]
            },
            "description": "Login con el usuario admin seedeado. El token se guarda autom치ticamente."
          },
          "response": []
        },
        {
          "name": "1.2 Register - Nuevo Usuario",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('createdUserId', jsonData.id);",
                  "}",
                  "",
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"nuevo.usuario@carstore.com\",\n    \"firstName\": \"Nuevo\",\n    \"lastName\": \"Usuario\",\n    \"password\": \"Password123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/register",
              "host": ["{{baseUrl}}"],
              "path": ["users", "register"]
            },
            "description": "Registrar un nuevo usuario"
          },
          "response": []
        },
        {
          "name": "1.3 Login - Usuario Creado",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"nuevo.usuario@carstore.com\",\n    \"password\": \"Password123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/login",
              "host": ["{{baseUrl}}"],
              "path": ["users", "login"]
            },
            "description": "Login con el usuario reci칠n creado"
          },
          "response": []
        },
        {
          "name": "1.4 Get User By Id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/{{createdUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{createdUserId}}"]
            },
            "description": "Obtener informaci칩n de un usuario por ID"
          },
          "response": []
        },
        {
          "name": "1.5 Login - Credenciales Inv치lidas",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 401 Unauthorized', function() {",
                  "    pm.response.to.have.status(401);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"admin@carstore.com\",\n    \"password\": \"WrongPassword!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/login",
              "host": ["{{baseUrl}}"],
              "path": ["users", "login"]
            },
            "description": "Test de login fallido con credenciales incorrectas"
          },
          "response": []
        }
      ],
      "description": "Endpoints de autenticaci칩n y gesti칩n de usuarios"
    },
    {
      "name": "游논 2. Clients (Clientes)",
      "item": [
        {
          "name": "2.1 Create Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('createdClientId', jsonData.id);",
                  "}",
                  "",
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"firstName\": \"Juan\",\n    \"lastName\": \"P칠rez\",\n    \"email\": \"juan.perez@email.com\",\n    \"phone\": \"+54 11 1234-5678\",\n    \"address\": \"Av. Corrientes 1234, CABA\",\n    \"dni\": \"30123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients",
              "host": ["{{baseUrl}}"],
              "path": ["clients"]
            },
            "description": "Crear un nuevo cliente"
          },
          "response": []
        },
        {
          "name": "2.2 Get All Clients",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response es un array', function() {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/clients",
              "host": ["{{baseUrl}}"],
              "path": ["clients"]
            },
            "description": "Obtener lista de todos los clientes"
          },
          "response": []
        },
        {
          "name": "2.3 Get Client By Id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/clients/{{createdClientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "{{createdClientId}}"]
            },
            "description": "Obtener cliente por ID"
          },
          "response": []
        },
        {
          "name": "2.4 Update Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 204 No Content', function() {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"firstName\": \"Juan Carlos\",\n    \"lastName\": \"P칠rez Garc칤a\",\n    \"dni\": \"30123456\",\n    \"email\": \"juancarlos.perez@email.com\",\n    \"phone\": \"+54 11 9876-5432\",\n    \"address\": \"Av. Santa Fe 4567, CABA\",\n    \"status\": 0\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients/{{createdClientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "{{createdClientId}}"]
            },
            "description": "Actualizar datos del cliente. Status: 0=Active, 1=Inactive"
          },
          "response": []
        },
        {
          "name": "2.5 Create Another Client (para ventas)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"firstName\": \"Mar칤a\",\n    \"lastName\": \"Gonz치lez\",\n    \"email\": \"maria.gonzalez@email.com\",\n    \"phone\": \"+54 11 5555-1234\",\n    \"address\": \"Calle Florida 123, CABA\",\n    \"dni\": \"28765432\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients",
              "host": ["{{baseUrl}}"],
              "path": ["clients"]
            },
            "description": "Crear otro cliente para pruebas de ventas"
          },
          "response": []
        },
        {
          "name": "2.6 Delete Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 204 No Content', function() {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/clients/{{createdClientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "{{createdClientId}}"]
            },
            "description": "Eliminar cliente por ID"
          },
          "response": []
        }
      ],
      "description": "Endpoints para gesti칩n de clientes"
    },
    {
      "name": "游뚱 3. Cars (Veh칤culos)",
      "item": [
        {
          "name": "3.0 Get All Cars (para obtener IDs seedeados)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "if (jsonData.length > 0) {",
                  "    // Guardar el primer auto para tests",
                  "    pm.collectionVariables.set('createdCarId', jsonData[0].id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cars",
              "host": ["{{baseUrl}}"],
              "path": ["cars"]
            },
            "description": "Obtener todos los autos para ver los IDs de marcas y modelos seedeados"
          },
          "response": []
        },
        {
          "name": "3.1 Create Car",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('createdCarId', jsonData.id);",
                  "}",
                  "",
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// IMPORTANTE: Antes de ejecutar, debes reemplazar",
                  "// los GUIDs de Marca y Modelo con los valores reales",
                  "// de tu base de datos seedeada.",
                  "// ",
                  "// Puedes obtenerlos ejecutando primero 'Get All Cars'"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"marca\": \"{{marcaId}}\",\n    \"modelo\": \"{{modeloId}}\",\n    \"color\": 4,\n    \"carType\": 0,\n    \"carStatus\": 0,\n    \"serviceCar\": 3,\n    \"cantidadPuertas\": 4,\n    \"cantidadAsientos\": 5,\n    \"cilindrada\": 2000,\n    \"kilometraje\": 0,\n    \"a침o\": 2024,\n    \"patente\": \"AB123CD\",\n    \"descripcion\": \"Auto nuevo en perfectas condiciones\",\n    \"precio\": 25000.00\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/cars",
              "host": ["{{baseUrl}}"],
              "path": ["cars"]
            },
            "description": "Crear un nuevo auto.\n\nEnums:\n- color: 0=White, 1=Black, 2=Gray, 3=Silver, 4=Red, 5=Blue, 6=Green, 7=Yellow, 8=Brown\n- carType: 0=Sedan, 1=Coupe, 2=Hatchback, 3=SUV, 4=Pickup, 5=Minivan\n- carStatus: 0=New, 1=Used, 2=Certified\n- serviceCar: 0=Service, 1=EnVenta, 2=Vendido, 3=Disponible, 4=NoDisponible\n\n丘멆잺 IMPORTANTE: Debes reemplazar marcaId y modeloId con GUIDs v치lidos de la BD."
          },
          "response": []
        },
        {
          "name": "3.2 Get All Cars",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response es un array', function() {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cars",
              "host": ["{{baseUrl}}"],
              "path": ["cars"]
            },
            "description": "Obtener lista de todos los autos"
          },
          "response": []
        },
        {
          "name": "3.3 Get Car By Id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cars/{{createdCarId}}",
              "host": ["{{baseUrl}}"],
              "path": ["cars", "{{createdCarId}}"]
            },
            "description": "Obtener auto por ID"
          },
          "response": []
        },
        {
          "name": "3.4 Update Car",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 204 No Content', function() {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"marca\": \"{{marcaId}}\",\n    \"modelo\": \"{{modeloId}}\",\n    \"color\": 5,\n    \"carType\": 0,\n    \"carStatus\": 1,\n    \"serviceCar\": 1,\n    \"cantidadPuertas\": 4,\n    \"cantidadAsientos\": 5,\n    \"cilindrada\": 2000,\n    \"kilometraje\": 15000,\n    \"a침o\": 2024,\n    \"patente\": \"AB123CD\",\n    \"descripcion\": \"Auto actualizado - ahora en venta\",\n    \"precio\": 23000.00\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cars/{{createdCarId}}",
              "host": ["{{baseUrl}}"],
              "path": ["cars", "{{createdCarId}}"]
            },
            "description": "Actualizar datos del auto"
          },
          "response": []
        },
        {
          "name": "3.5 Search Cars (P칰blico)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/cars/search?minPrice=10000&maxPrice=50000&status=3",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cars", "search"],
              "query": [
                {
                  "key": "minPrice",
                  "value": "10000"
                },
                {
                  "key": "maxPrice",
                  "value": "50000"
                },
                {
                  "key": "status",
                  "value": "3",
                  "description": "3=Disponible"
                }
              ]
            },
            "description": "B칰squeda p칰blica de autos (no requiere autenticaci칩n)"
          },
          "response": []
        },
        {
          "name": "3.6 Get Car Images",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cars/{{createdCarId}}/images",
              "host": ["{{baseUrl}}"],
              "path": ["cars", "{{createdCarId}}", "images"]
            },
            "description": "Obtener im치genes de un auto espec칤fico"
          },
          "response": []
        },
        {
          "name": "3.7 Get All Car Images",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cars/images",
              "host": ["{{baseUrl}}"],
              "path": ["cars", "images"]
            },
            "description": "Obtener todas las im치genes de autos"
          },
          "response": []
        },
        {
          "name": "3.8 Upload Car Image",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": ""
                },
                {
                  "key": "isPrimary",
                  "value": "true",
                  "type": "text"
                },
                {
                  "key": "order",
                  "value": "1",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/cars/{{createdCarId}}/images",
              "host": ["{{baseUrl}}"],
              "path": ["cars", "{{createdCarId}}", "images"]
            },
            "description": "Subir imagen para un auto. Selecciona un archivo de imagen en el campo 'file'."
          },
          "response": []
        },
        {
          "name": "3.9 Delete Car",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 204 No Content', function() {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cars/{{createdCarId}}",
              "host": ["{{baseUrl}}"],
              "path": ["cars", "{{createdCarId}}"]
            },
            "description": "Eliminar auto por ID"
          },
          "response": []
        }
      ],
      "description": "Endpoints para gesti칩n de veh칤culos"
    },
    {
      "name": "游눯 4. Sales (Ventas)",
      "item": [
        {
          "name": "4.1 Create Sale",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('createdSaleId', jsonData.id);",
                  "}",
                  "",
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"carId\": \"{{createdCarId}}\",\n    \"clientId\": \"{{createdClientId}}\",\n    \"finalPrice\": 24500.00,\n    \"paymentMethod\": 0,\n    \"status\": \"Pending\",\n    \"contractNumber\": \"CNT-2024-001\",\n    \"comments\": \"Venta con pago en efectivo\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sales",
              "host": ["{{baseUrl}}"],
              "path": ["sales"]
            },
            "description": "Crear una nueva venta.\n\nPaymentMethod: 0=Cash, 1=Credit, 2=Debit, 3=Transfer\n\n丘멆잺 IMPORTANTE: Necesitas IDs v치lidos de Car y Client."
          },
          "response": []
        },
        {
          "name": "4.2 Get All Sales",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response es un array', function() {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sales",
              "host": ["{{baseUrl}}"],
              "path": ["sales"]
            },
            "description": "Obtener lista de todas las ventas"
          },
          "response": []
        },
        {
          "name": "4.3 Get Sale By Id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/sales/{{createdSaleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["sales", "{{createdSaleId}}"]
            },
            "description": "Obtener venta por ID"
          },
          "response": []
        },
        {
          "name": "4.4 Update Sale",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 204 No Content', function() {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"id\": \"{{createdSaleId}}\",\n    \"finalPrice\": 24000.00,\n    \"paymentMethod\": 1,\n    \"status\": 0,\n    \"contractNumber\": \"CNT-2024-001-UPDATED\",\n    \"comments\": \"Venta actualizada - cambio a pago con tarjeta\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sales/{{createdSaleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["sales", "{{createdSaleId}}"]
            },
            "description": "Actualizar venta. Status: 0=Pending, 1=Completed, 2=Cancelled. PaymentMethod: 0=Cash, 1=Credit, 2=Debit, 3=Transfer"
          },
          "response": []
        },
        {
          "name": "4.5 Complete Sale (Status Completed)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 204 No Content', function() {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"id\": \"{{createdSaleId}}\",\n    \"finalPrice\": 24000.00,\n    \"paymentMethod\": 0,\n    \"status\": 1,\n    \"contractNumber\": \"CNT-2024-001-COMPLETED\",\n    \"comments\": \"Venta completada exitosamente\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sales/{{createdSaleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["sales", "{{createdSaleId}}"]
            },
            "description": "Marcar venta como completada (status=1)"
          },
          "response": []
        }
      ],
      "description": "Endpoints para gesti칩n de ventas"
    },
    {
      "name": "游닇 5. Quotes (Cotizaciones)",
      "item": [
        {
          "name": "5.1 Create Quote",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('createdQuoteId', jsonData.id);",
                  "}",
                  "",
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"carId\": \"{{createdCarId}}\",\n    \"clientId\": \"{{createdClientId}}\",\n    \"proposedPrice\": 22000.00,\n    \"validUntil\": \"2025-02-28T23:59:59Z\",\n    \"comments\": \"Cotizaci칩n para cliente interesado\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/quotes",
              "host": ["{{baseUrl}}"],
              "path": ["quotes"]
            },
            "description": "Crear una nueva cotizaci칩n.\n\n丘멆잺 IMPORTANTE: Necesitas IDs v치lidos de Car y Client."
          },
          "response": []
        },
        {
          "name": "5.2 Get All Quotes",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response es un array', function() {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/quotes",
              "host": ["{{baseUrl}}"],
              "path": ["quotes"]
            },
            "description": "Obtener lista de todas las cotizaciones"
          },
          "response": []
        },
        {
          "name": "5.3 Get Quote By Id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/quotes/{{createdQuoteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["quotes", "{{createdQuoteId}}"]
            },
            "description": "Obtener cotizaci칩n por ID"
          },
          "response": []
        },
        {
          "name": "5.4 Get Expired Quotes",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/quotes/expired",
              "host": ["{{baseUrl}}"],
              "path": ["quotes", "expired"]
            },
            "description": "Obtener cotizaciones expiradas"
          },
          "response": []
        },
        {
          "name": "5.5 Update Quote",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"proposedPrice\": 21500.00,\n    \"validUntil\": \"2025-03-15T23:59:59Z\",\n    \"comments\": \"Precio actualizado con descuento\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/quotes/{{createdQuoteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["quotes", "{{createdQuoteId}}"]
            },
            "description": "Actualizar cotizaci칩n"
          },
          "response": []
        },
        {
          "name": "5.6 Accept Quote",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/quotes/{{createdQuoteId}}/accept",
              "host": ["{{baseUrl}}"],
              "path": ["quotes", "{{createdQuoteId}}", "accept"]
            },
            "description": "Aceptar cotizaci칩n"
          },
          "response": []
        },
        {
          "name": "5.7 Reject Quote",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"reason\": \"El cliente encontr칩 una mejor oferta\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/quotes/{{createdQuoteId}}/reject",
              "host": ["{{baseUrl}}"],
              "path": ["quotes", "{{createdQuoteId}}", "reject"]
            },
            "description": "Rechazar cotizaci칩n con raz칩n"
          },
          "response": []
        },
        {
          "name": "5.8 Delete Quote",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 204 No Content', function() {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/quotes/{{createdQuoteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["quotes", "{{createdQuoteId}}"]
            },
            "description": "Eliminar cotizaci칩n por ID"
          },
          "response": []
        }
      ],
      "description": "Endpoints para gesti칩n de cotizaciones"
    },
    {
      "name": "游눳 6. Financial (Transacciones)",
      "item": [
        {
          "name": "6.1 Create Financial Transaction",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('createdFinancialId', jsonData.id);",
                  "}",
                  "",
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": 0,\n    \"amount\": 5000.00,\n    \"description\": \"Pago de servicio de mantenimiento\",\n    \"paymentMethod\": 0,\n    \"category\": \"{{categoryId}}\",\n    \"carId\": \"{{createdCarId}}\",\n    \"clientId\": null,\n    \"saleId\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/financial",
              "host": ["{{baseUrl}}"],
              "path": ["financial"]
            },
            "description": "Crear una nueva transacci칩n financiera.\n\nTransactionType: 0=Income, 1=Expense\nPaymentMethod: 0=Cash, 1=Credit, 2=Debit, 3=Transfer\n\n丘멆잺 IMPORTANTE: Necesitas un ID de categor칤a v치lido."
          },
          "response": []
        },
        {
          "name": "6.2 Create Income Transaction (Venta)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": 0,\n    \"amount\": 25000.00,\n    \"description\": \"Venta de veh칤culo\",\n    \"paymentMethod\": 3,\n    \"category\": \"{{categoryId}}\",\n    \"carId\": \"{{createdCarId}}\",\n    \"clientId\": \"{{createdClientId}}\",\n    \"saleId\": \"{{createdSaleId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/financial",
              "host": ["{{baseUrl}}"],
              "path": ["financial"]
            },
            "description": "Crear transacci칩n de ingreso por venta (con todas las relaciones)"
          },
          "response": []
        },
        {
          "name": "6.3 Create Expense Transaction",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 201 Created', function() {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": 1,\n    \"amount\": 500.00,\n    \"description\": \"Pago de servicios p칰blicos\",\n    \"paymentMethod\": 3,\n    \"category\": \"{{categoryId}}\",\n    \"carId\": null,\n    \"clientId\": null,\n    \"saleId\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/financial",
              "host": ["{{baseUrl}}"],
              "path": ["financial"]
            },
            "description": "Crear transacci칩n de gasto (type=1 Expense)"
          },
          "response": []
        },
        {
          "name": "6.4 Get All Financial Transactions",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response es un array', function() {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/financial",
              "host": ["{{baseUrl}}"],
              "path": ["financial"]
            },
            "description": "Obtener lista de todas las transacciones financieras"
          },
          "response": []
        },
        {
          "name": "6.5 Update Financial Transaction",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 204 No Content', function() {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": 0,\n    \"amount\": 5500.00,\n    \"description\": \"Pago de servicio actualizado\",\n    \"paymentMethod\": 1,\n    \"referenceNumber\": \"REF-2024-001\",\n    \"transactionDate\": \"2025-01-27T10:00:00Z\",\n    \"categoryId\": \"{{categoryId}}\",\n    \"carId\": \"{{createdCarId}}\",\n    \"clientId\": null,\n    \"saleId\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/financial/{{createdFinancialId}}",
              "host": ["{{baseUrl}}"],
              "path": ["financial", "{{createdFinancialId}}"]
            },
            "description": "Actualizar transacci칩n financiera"
          },
          "response": []
        },
        {
          "name": "6.6 Delete Financial Transaction",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 204 No Content', function() {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/financial/{{createdFinancialId}}",
              "host": ["{{baseUrl}}"],
              "path": ["financial", "{{createdFinancialId}}"]
            },
            "description": "Eliminar transacci칩n financiera por ID"
          },
          "response": []
        }
      ],
      "description": "Endpoints para gesti칩n de transacciones financieras"
    },
    {
      "name": "游댢 7. Setup Helpers",
      "item": [
        {
          "name": "Get Cars (Extract Marca/Modelo IDs)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code es 200', function() {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Este request es para inspeccionar los datos",
                  "// y extraer los IDs de marcas y modelos disponibles",
                  "console.log('Response:', pm.response.json());",
                  "",
                  "var jsonData = pm.response.json();",
                  "if (jsonData.length > 0) {",
                  "    // Guardar el primer auto como referencia",
                  "    var firstCar = jsonData[0];",
                  "    console.log('Primera marca:', firstCar.marca);",
                  "    console.log('Primer modelo:', firstCar.modelo);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/cars",
              "host": ["{{baseUrl}}"],
              "path": ["cars"]
            },
            "description": "Obtener autos para extraer IDs de marcas y modelos seedeados.\n\nRevisa la respuesta en la consola para encontrar los IDs."
          },
          "response": []
        },
        {
          "name": "Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('API est치 corriendo', function() {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "Verificar que la API est치 corriendo"
          },
          "response": []
        }
      ],
      "description": "Requests de ayuda para configurar variables y verificar estado"
    }
  ]
}

